<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="description" content=""/>
	<title>Nort - Join</title>
	<link href="../css/style.css" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Montserrat:700" rel="stylesheet">
</head>
<body>
	<div id="main">
		
		<div class="logoContainer">
  			<img class="logo" src="../NORT.png" alt="NORT"/>
		</div>
		<div class="menu">
			<h1>Enter game code & a nickname</h1>
			<input class="code-input" id="code-input" type="text" placeholder="1234" maxlength="4" />
			<input id="nickname" class="nickname-input" type="text" placeholder="nickname" maxlength="16" />
			<button onclick="return joinGame()" class="button" id="join-button"><a id="join">Join</a></button>
		</div>
		
	</div>
</body>

<script src="https://www.gstatic.com/firebasejs/4.12.1/firebase.js"></script>
<script src="../game/gameFunctions.js" type="text/javascript"></script>
<script>
	async function getName() {
		await login();

		await getUsername().then((name) => {
			console.log(name);
			document.getElementById("nickname").value = name;
		})
	}

	getName();
	async function joinGame() {

		var join = document.getElementById("code-input").value;
		var nick = document.getElementById("nickname").value;

		if (join==null || join=="" || nick==null || nick=="") {
			alert("Gamecode and nickname required");
			return false;
		}
	    await setUsername(nick).then((d) => {
	    	window.location.href = "../game/" + join;
	    })
	}
</script>
</html>